{"version":3,"sources":["STTable.tsx","index.tsx"],"names":["STTable","render","data","props","args","columns","actions","row_key","that","concat","title","key","fixed","width","action_width","text","record","size","map","action","i","href","onClick","handleAction","bind","onChange","handleReAction","rowKey","dataSource","scroll","x","sticky","this","console","log","uuidv4","e","stopPropagation","setState","action_records","action_id","Streamlit","setComponentValue","state","pagination","filters","sorter","extra","setFrameHeight","setTimeout","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"yPAwBMA,E,4MAuCGC,OAAS,WACd,IAAMC,EAAO,EAAKC,MAAMC,KAAKF,KACzBG,EAA+B,EAAKF,MAAMC,KAAKC,QACnD,EAA2B,EAAKF,MAAMC,KAA/BE,EAAP,EAAOA,QAASC,EAAhB,EAAgBA,QACVC,EAAI,eAmBV,OAlBIF,IACFD,EAAUA,EAAQI,OAChB,CACEC,MAAO,SACPC,IAAK,YACLC,MAAO,QACPC,MAAO,EAAKV,MAAMC,KAAKU,aACvBb,OAAQ,SAACc,EAAMC,GAAP,OACN,cAAC,IAAD,CAAOC,KAAK,SAAZ,SACGX,EAAQY,KAAI,SAASC,EAAgBC,GACpC,IAAMT,EAAMK,EAAOT,GACnB,OAAO,mBAAGc,KAAK,IAAuBC,QAASd,EAAKe,aAAaJ,EAAQH,GAAQQ,KAAKhB,GAA/E,SAAuFW,GAAtER,EAAMQ,YAQvC,cAAC,IAAD,CACGM,SAAU,EAAKC,eAAeF,KAApB,gBACVG,OAAQpB,EACRF,QAASA,EACTuB,WAAY1B,EACZ2B,OAAQ,CAAEC,EAAG,MACbC,QAAM,K,kDAnEd,SAAqBZ,EAAgBH,GACnC,IAAMR,EAAOwB,KAEb,OADAC,QAAQC,IAAIC,eACL,SAASC,GACdA,EAAEC,kBACF7B,EAAK8B,SAAS,CACVnB,OAAQA,EACRoB,eAAgB,CAACvB,GACjBwB,UAAWL,gBAEb,kBAAMM,IAAUC,kBAAkBlC,EAAKmC,a,4BAK7C,SAAuBC,EAAiBC,EAAcC,EAAaC,GAAgB,IAAD,OAChFN,IAAUO,eAAe,KACzBC,WAAWR,IAAUO,eAAgB,GACrChB,KAAKM,SAAS,CACVM,aACAC,UACAC,SACA3B,OAAQ4B,EAAM5B,OACdqB,UAAWL,gBAEb,kBAAMM,IAAUC,kBAAkB,EAAKC,Y,+BAI3C,WACEM,WAAWR,IAAUO,eAAgB,K,gCAGvC,WACEC,WAAWR,IAAUO,eAAgB,O,GApCnBE,KA2EPC,cAAwBnD,G,OC9FvCoD,IAASnD,OACP,cAAC,IAAMoD,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.85809552.chunk.js","sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport { Table, Space} from 'antd';\nimport { ColumnProps } from \"antd/lib/table\";\nimport { v4 as uuidv4 } from 'uuid';\n\n\ninterface IExtra {\n  action: string\n}\n\ninterface State {\n  pagination: any\n  filters: any \n  sorter: any \n  action: string \n  action_records: any[]\n  action_id: string\n}\n\nclass STTable extends StreamlitComponentBase<State> {\n\n  private handleAction(action: string, record: object) {\n    const that = this;\n    console.log(uuidv4());\n    return function(e:  React.MouseEvent<HTMLElement>) {\n      e.stopPropagation();\n      that.setState({ \n          action: action, \n          action_records: [record],\n          action_id: uuidv4(),\n        },\n        () => Streamlit.setComponentValue(that.state)\n      )\n    }\n  }\n\n  private handleReAction(pagination: any, filters: any, sorter: any, extra: IExtra) {\n    Streamlit.setFrameHeight(100);\n    setTimeout(Streamlit.setFrameHeight, 1);\n    this.setState({ \n        pagination,\n        filters,\n        sorter,\n        action: extra.action,\n        action_id: uuidv4(),\n      },\n      () => Streamlit.setComponentValue(this.state)\n    )\n  }\n\n  componentDidMount() {\n    setTimeout(Streamlit.setFrameHeight, 1);\n  }\n\n  componentDidUpdate() {\n    setTimeout(Streamlit.setFrameHeight, 1);\n  }\n\n  public render = (): ReactNode => {\n    const data = this.props.args.data;\n    let columns : ColumnProps<any>[] = this.props.args.columns;\n    const {actions, row_key} = this.props.args;\n    const that = this;\n    if (actions) {\n      columns = columns.concat(\n        {\n          title: 'Action',\n          key: 'operation',\n          fixed: 'right', \n          width: this.props.args.action_width,\n          render: (text, record) => (\n            <Space size=\"middle\">\n              {actions.map(function(action: string, i: Number){\n                const key = record[row_key];\n                return <a href=\"#\" key={key + action} onClick={that.handleAction(action, record).bind(that)}>{action}</a>\n              })}\n            </Space>\n          )\n        }\n      );\n    }\n    return (\n       <Table\n          onChange={this.handleReAction.bind(this)}\n          rowKey={row_key}\n          columns={columns}\n          dataSource={data}\n          scroll={{ x: 1500 }}\n          sticky\n        />\n    )\n  }\n}\n\nexport default withStreamlitConnection(STTable);\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport STTable from \"./STTable\"\nimport 'antd/dist/antd.css'; \n\nReactDOM.render(\n  <React.StrictMode>\n    <STTable />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}